# API DocString Specification

## Version 0.1

This file describes the format of docstrings parsed by api-docstring.

## Format

By default, api-docstring will generate two files:

* An `api-docstring.(json|yaml))` file.
* One or more API specification files:
  * If any documented endpoints specify an `@apiProto` of `rest`, an `openapi.(json|yaml)` file will be generated.
  * If any documented endpoints specify an `@apiProto` of `event`, an `asyncapi.(json|yaml)` file will be generated.

The names of the files is configurable in the `api-docstring.config.yaml` file.

## Schema - Docstring Tags

This program uses standard Javadoc-style block comments to define API endpoints. For example:

```js
/**
 * @apiProto {rest}
 * 
 */
```

By default, two protocols are supported:

* `rest`: Define endpoints for a RESTful API. (Represented in the final artifact as an OpenAPI-compliant configuration document.)
* `event`: Define handlers for an event-driven asynchronous API. (Represented in the final artifact as an AsyncAPI-compliant configuration document.)

The specification of `rest` is based on the [apidocjs](https://apidocjs.com/) specfification, while the specification of `event` serves as an extension of that specification.

### Global Options

<i>Fields marked with * are required.</i>

#### `@apiBinaryBody [{encoding}] [maxSize]`<br/>`[description]`

Defines the body of this block to be binary data. The block can specify multiple instances of this tag if multiple body encodings are supported.

When using this tag, it is recommended to include an instance of `@apiHeader` describing a `Content-Type` and `Content-Length` headers detailing the supported content types and the size of the body, respectively.

| Field         | Description                                                                                               |
| ------------- | --------------------------------------------------------------------------------------------------------- |
| `encoding`    | The [mime type](https://www.iana.org/assignments/media-types/media-types.xhtml) of the accepted encoding. |
| `maxSize`     | The maximum supported size of the binary body in bytes.                                                   |
| `description` | A detailed description which starts on the next line.                                                     |

Example:

```js
/**
 * @apiProto {rest}
 * 
 * @api {post} /upload-image
 * 
 * @apiHeader Content-Type
 * Content types supported: "image/jpeg", "image/png", and "image/bmp".
 * 
 * @apiHeader Content-Length
 * The length of the body in bytes. (Maximum length: 10,000,000 bytes)
 * 
 * @apiBinaryBody {image/jpeg} 10000000
 * A JPEG image.
 * 
 * @apiBinaryBody {image/png} 10000000
 * A PNG image. 
 * 
 * @apiBinaryBody {image/bmp} 10000000
 * A BMP image. 
 */
```

#### `@apiBody [{type}] name[.inner][?][=defaultValue]`<br/>`[description]`

Defines a parameter of the request body.

| Field           | Description                                                                                                                                                                                                                                                              |
| --------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| `{type}`        | The type parameter type of the parameter.<br/><br/>Supported values are:<ul><li>`Boolean`</li><li>`Integer`</li><li>`Number`</li><li>`String`</li><li>`Object`</li><li>Any type defined by `@apiEnum` or `@apiType`</li><li>An array of any of the above types</li></ul> |
| `name`*         | The name of the parameter.                                                                                                                                                                                                                                               |
| `[.inner]`      | Describes the inner parameter of a previously defined parameter with the defined type of `Object`.                                                                                                                                                                       |
| `?`             | Marks that the parameter is optional.                                                                                                                                                                                                                                    |
| `=defaultValue` | Marks that an optional parameter has a default value.                                                                                                                                                                                                                    |
| `[description]` | A detailed multiline description which starts on the next line.                                                                                                                                                                                                          |

Example:

```js
/**
 * @apiProto {rest}
 * 
 * @api {post} /login
 * 
 * @apiBody {String} username
 * The user's username.
 * 
 * @apiBody {String} passwordHash
 * The user's pre-hashed password.
 */
```

#### `@apiBodyExample [{lang}] title`<br/>`example`

Shows an example usage for a request body.

| Field      | Description                                                                   |
| ---------- | ----------------------------------------------------------------------------- |
| `{lang}`   | Specifies the code language in which the example is intended to be formatted. |
| `title`*   | A short title text for the example code block.                                |
| `example`* | The multiline text which will make up the example code block.                 |

Example:

```js
/**
 * @apiProto {rest}
 * 
 * @api {post} /login
 * 
 * @apiBody {String} username
 * The user's username.
 * 
 * @apiBody {String} passwordHash
 * The user's pre-hashed password.
 * 
 * @apiBodyExample {json} User Login Example
 * {
 *   "username": "JohnSmith123",
 *   "passwordHash": "**********"
 * }
 */
```

#### `@apiDefine name`

Creates a reusable documentation block that can be imported into other blocks. These blocks must be defined in the same file as the blocks that import them.

`@apiDefine` can only be used once per block.

| Field   | Description                                                                                                                                                                                                                                                                                      |
| ------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| `name`* | The name for the block which other blocks will use to reference this block. This name must be unique among all blocks in the file in which this block is defined as well as all global blocks defined with `@apiDefineGlobal`, although the same name with a different `@apiVersion` is allowed. |

#### `@apiDefineGlobal name`

Creates a reusable documentation block that can be imported into other blocks. These blocks can be defined in any file loaded by the program and can be used in any other file.

`@apiDefineGlobal` can only be used once per block.

| Field   | Description                                                                                                                                                                                                                     |
| ------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `name`* | The name for the block which other blocks will use to reference this block. This name must be unique among all global blocks defined with `@apiDefineGlobal`, although the same name with a different `@apiVersion` is allowed. |

#### `@apiDeprecated`<br/>`[text]`

Marks an endpoint as deprecated with an optional deprecation message most commonly used to direct users to another endpoint.

| Field  | Description                               |
| ------ | ----------------------------------------- |
| `text` | Multiline message to display to the user. |

#### `@apiDescription`<br/>`text`

Provides a detailed description of the API endpoint.

| Field   | Description                 |
| ------- | --------------------------- |
| `text`* | Multiline description text. |

#### `@apiEnum [{type}]`<br/>`enumName[=enumValue]`<br/>`...`

Defines an enumerated type. Can be defined as a set of strings or as a set of key-value pairs.

| Field          | Description                                                                                                                                     |
| -------------- | ----------------------------------------------------------------------------------------------------------------------------------------------- |
| `{type}`       | The value type of the enumerated value, if `enumValue` is specified.<br/><br/>Supported values are:<ul><li>`Integer`</li><li>`String`</li></ul> |
| `enumName`*    | A repeatable element containing a name in the enumeration.                                                                                      |
| `[=enumValue]` | The value of the enumeration.                                                                                                                   |

Example:

```js
/**
 * @apiProto {rest}
 * 
 * @api /jobs/:id/status
 * 
 * @apiEnum {Integer} JobStatus
 * Pending=0
 * Active=1
 * Complete=2
 * Error=3
 * 
 * @apiParam {String} id
 * The ID of the job.
 * 
 * @apiSuccess {JobStatus} status
 * The status of the job.
 */
```

#### `@apiError [(group)] [{type}] name[.inner][?]`<br/>`[description]`

Defines a return parameter in the event of an error. Multiple error responses can be specified by having multiple instances of `@apiError` with different values for `(group)`.

| Field           | Description                                                                                                                                                                                                                                                               |
| --------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `(group)`       | Specifies a group name for this parameter. All instances of `@apiError` in this code block with the same group name should be grouped together in generator implementations.                                                                                              |
| `{type}`        | The type parameter type of the parameter.<br/><br/>Supported values are:<ul><li>`Boolean`</li><li>`Integer`</li><li>`Number`</li><li>`String`</li><li>`Object`</li><li>Any type defined by `@apiEnum` or `@apiType`</li><li>An array of any of the above types</li></ul>< |
| `name`*         | The name of the parameter.                                                                                                                                                                                                                                                |
| `[.inner]`      | Describes the inner parameter of a previously defined parameter with the defined type of `Object`.                                                                                                                                                                        |
| `?`             | Marks that the parameter is optional.                                                                                                                                                                                                                                     |
| `[description]` | A detailed multiline description which starts on the next line.                                                                                                                                                                                                           |

Example:

```js
/**
 * @apiProto {rest}
 * 
 * @api /user/:id
 * 
 * @apiError (404) {String} message
 * The message of the error body.
 */
```

#### `@apiErrorExample [{lang}] title`</br>`example`

Provides an example of an error response returned from the endpoint.

| Field      | Description                                                                   |
| ---------- | ----------------------------------------------------------------------------- |
| `{lang}`   | Specifies the code language in which the example is intended to be formatted. |
| `title`*   | A short title text for the example code block.                                |
| `example`* | The multiline text which will make up the example code block.                 |

Example:

```js
/**
 * @apiProto {rest}
 * 
 * @api /user/:id
 * 
 * @apiError (404) {String} message
 * The message of the error body.
 * 
 * @apiErrorExample {json} Example - User Not Found
 * HTTP/1.1 404 Not Found
 * {
 *     "message": "UserNotFound"
 * }
 */
```

#### `@apiErrorHeader [(group)] [{type}] name[?][=defaultValue]`<br/>`[description]`

Defines an error response header for this endpoint.

| Field           | Description                                                                                                                                                                                                                                                                                                                                                                                                               |
| --------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `(group)`       | Specifies a group name for this header. All instances of `@apiErrorHeader` in this code block with the same group name should be grouped together in generator implementations with any corresponding `@apiError` instances.                                                                                                                                                                                              |
| `{type}`        | The type of the header value.<br/><br/>Supported values are:<ul><li>`Boolean`</li><li>`Integer`</li><li>`Number`</li><li>`String`</li><li>Any type defined by `@apiEnum`</li><li>An array of any of the above types<sup>†</sup></li></ul><i><sup>†</sup>: If specifying an array parameter type, it is recommended to include in the `description` field what character should be used to delimit the array elements.</i> |
| `{name}`        | The name of the header. With no further modifiers (see below), the header is marked as required.                                                                                                                                                                                                                                                                                                                          |
| `?`             | Marks that the header is optional.                                                                                                                                                                                                                                                                                                                                                                                        |
| `=defaultValue` | Marks that an optional header has a default value.                                                                                                                                                                                                                                                                                                                                                                        |
| `description`   | A detailed multiline description which starts on the next line.                                                                                                                                                                                                                                                                                                                                                           |

Example:

```js
/**
 * @apiProto {rest}
 * 
 * @api {get} /user/:id
 * Fetches a user with the given ID.
 * 
 * @apiErrorHeader (429) Retry-After
 * How long to wait if the client has reached their rate limit
 */
```

#### `@apiErrorHeaderExample [{lang}] title`<br/>`example`

Shows an example usage for an error response header.

| Field      | Description                                                                   |
| ---------- | ----------------------------------------------------------------------------- |
| `{lang}`   | Specifies the code language in which the example is intended to be formatted. |
| `title`*   | A short title text for the example code block.                                |
| `example`* | The multiline text which will make up the example code block.                 |

Example:

```js
/**
 * @apiProto {rest}
 * 
 * @api {get} /user/:id
 * Fetches a user with the given ID.
 * 
 * @apiErrorHeader (429) Retry-After
 * How long to wait if the client has reached their rate limit
 * 
 * @apiHeaderExample {json} Retry-After Example:
 * { "retry-after": 3600 }
 */
```

#### `@apiExample [{lang}] title`<br/>`example`

Provides an example usage of the endpoint.

| Field      | Description                                                                   |
| ---------- | ----------------------------------------------------------------------------- |
| `{lang}`   | Specifies the code language in which the example is intended to be formatted. |
| `title`*   | A short title text for the example code block.                                |
| `example`* | The multiline text which will make up the example code block.                 |

#### `@apiGroup name`

Specifies which group an endpoint belongs to, which can be used in implementation to logically organize endpoint definitions.

| Field   | Description            |
| ------- | ---------------------- |
| `name`* | The name of the group. |

#### `@apiHeader name[?][=defaultValue]`<br/>`[description]`

Defines a request header for this endpoint.

| Field           | Description                                                                                      |
| --------------- | ------------------------------------------------------------------------------------------------ |
| `name`*         | The name of the header. With no further modifiers (see below), the header is marked as required. |
| `?`             | Marks that the header is optional.                                                               |
| `=defaultValue` | Marks that an optional header has a default value.                                               |
| `description`   | A detailed multiline description which starts on the next line.                                  |

Example:

```js
/**
 * @apiProto {rest}
 * 
 * @api {get} /user/:id
 * Fetches a user with the given ID.
 * 
 * @apiHeader x-api-key
 * The API key with which to validate the request.
 */
```

#### `@apiHeaderExample [{lang}] title`<br/>`example`

Shows an example usage for a request header.

| Field      | Description                                                                   |
| ---------- | ----------------------------------------------------------------------------- |
| `{lang}`   | Specifies the code language in which the example is intended to be formatted. |
| `title`*   | A short title text for the example code block.                                |
| `example`* | The multiline text which will make up the example code block.                 |

Example:

```js
/**
 * @apiProto {rest}
 * 
 * @api {get} /user/:id
 * Fetches a user with the given ID.
 * 
 * @apiHeader x-api-key
 * The API key with which to validate the request.
 * 
 * @apiHeaderExample {json} API Key Example:
 * { "x-api-key": "a1b2c3d4.e5f6g7h8i9j0k1l2m3n4o5p6q7r8s9t0" }
 */
```

#### `@apiIgnore [reason]`

If specified in a block, this instructs the program to ignore this block. Useful for when a block is outdated or is a work-in-progress and is not intended to end up in the generated documentation.

For clarity, it is recommended that this tag is placed at the top of a block.

| Field    | Description                                                                     |
| -------- | ------------------------------------------------------------------------------- |
| `reason` | The message to display in the program logging output when the block is ignored. |

Example:

```js
/**
 * @apiIgnore The database implementation for this method is not yet complete.
 * 
 * @apiProto {rest}
 * 
 * @api {get} /user/:id
 * Fetches a user with the given ID.
 */
```

#### `@apiName name`

**Should always be used.**

Defines the name of an endpoint, intended to be used by generator implementations.

| Field   | Description                                                                                                                                      |
| ------- | ------------------------------------------------------------------------------------------------------------------------------------------------ |
| `name`* | The name of the endpoint. This name must be globally unique across all blocks, although the same name with a different `@apiVersion` is allowed. |

Example:

```js
/**
 * @apiProto {rest}
 * 
 * @apiName Get User By ID
 * 
 * @api {get} /user/:id
 * Fetches a user with the given ID.
 */
```

#### `@apiShortName name`

Defines a short name of an endpoint. The short name can be useful for certain applications in generator implementations, such as creating URLs or page anchors.

It is recommended to have the short name be a web-safe string with no whitespace.

| Field   | Description                                                                                                                                                  |
| ------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| `name`* | The short name of the endpoint. This short name must be globally unique across all blocks, although the same name with a different `@apiVersion` is allowed. |

Example:

```js
/**
 * @apiProto {rest}
 * 
 * @apiName Get User By ID
 * @apiShortName GetUserByID
 * 
 * @api {get} /user/:id
 * Fetches a user with the given ID.
 */
```

#### `@apiParam [{type}] name[?][=defaultValue]`<br/>`[description]`

Defines a path parameter passed to this endpoint.

| Field           | Description                                                                                                                                                                                                                                                                                                                                                                                                            |
| --------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `{type}`        | The type of the parameter.<br/><br/>Supported values are:<ul><li>`Boolean`</li><li>`Integer`</li><li>`Number`</li><li>`String`</li><li>Any type defined by `@apiEnum`</li><li>An array of any of the above types<sup>†</sup></li></ul><i><sup>†</sup>: If specifying an array parameter type, it is recommended to include in the `description` field what character should be used to delimit the array elements.</i> |
| `name`          | The name of the header. With no further modifiers (see below), the header is marked as required.                                                                                                                                                                                                                                                                                                                       |
| `?`             | Marks that the header is optional.                                                                                                                                                                                                                                                                                                                                                                                     |
| `=defaultValue` | Marks that an optional header has a default value.                                                                                                                                                                                                                                                                                                                                                                     |
| `description`   | A detailed multiline description which starts on the next line.                                                                                                                                                                                                                                                                                                                                                        |

Example:

```js
/**
 * @apiProto {rest}
 * 
 * @api {get} /user/:id
 * Fetches a user with the given ID.
 * 
 * @apiParam {String} id
 * The ID of the user.
 */
```

#### `@apiParamExample [{lang}] title`</br>`example`

Provides an example of a path parameter.

| Field      | Description                                                                   |
| ---------- | ----------------------------------------------------------------------------- |
| `{lang}`   | Specifies the code language in which the example is intended to be formatted. |
| `title`*   | A short title text for the example code block.                                |
| `example`* | The multiline text which will make up the example code block.                 |

Example:

```js
/**
 * @apiProto {rest}
 * 
 * @api /user/:id
 * 
 * @apiParam {String} id
 * The ID of the user.
 * 
 * @apiParamExample {json} User ID Example
 * {
 *     "id": 4397
 * }
 */
```

#### `@apiPermission [{type}] name`<br/>`[description]`

Decribes the permission required to access this endpoint.

| Field          | Description                                                         |
| -------------- | ------------------------------------------------------------------- |
| `{type}`       | Sets the expected type of the permission system. E.g. "oauth", etc. |
| `name`*        | The name of the required permission.                                |
| `description`* | A detailed multiline description which starts on the next line.     |

Example:

```js
/**
 * @apiProto {rest}
 * 
 * @api /user/:id
 * 
 * @apiPermission {oauth} user:read
 * Read permission on users
 */
```

#### `@apiPrivate [reason]`

Marks a block as private, allowing the generation of two different API specifications with one containing both private and public endpoint definitions and one containing only public endpoint definitions.

For clarity, it is recommended that this tag is placed at the top of a block.

| Field    | Description                                                       |
| -------- | ----------------------------------------------------------------- |
| `reason` | A descriptive message for why this endpoint is marked as private. |

Example:

```js
/**
 * @apiPrivate Don't want third-parties to access admin information.
 * 
 * @apiProto {rest}
 * 
 * @api /admin/:id
 * 
 */
```

#### `@apiProto {type} [title]`

The protocol for the API element.

`@apiProto` can only be used once per block.

| Field     | Description                                                                                                                                                        |
| --------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| `{type}`* | <br/>Valid values: <ul><li>"rest"</li><li>"event"</li><li>"global" (Only in blocks marked with `apiDefine` or `apiDefineGlobal`).</li></ul>                        |
| `title`   | If included, defines a specific name for the protocol used for clarity. Can be used to specify whether a event-based protocol uses RTC or Websocket, for instance. |

Example:

```js
/**
 * @apiProto {rest}
 */
```

#### `@apiQuery [{type}] name[?][=defaultValue]`<br/>`[description]`

Defines a query parameter passed to this endpoint.

| Field           | Description                                                                                                                                                                                                                                                                                                                                                                                                            |
| --------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `{type}`        | The type of the parameter.<br/><br/>Supported values are:<ul><li>`Boolean`</li><li>`Integer`</li><li>`Number`</li><li>`String`</li><li>Any type defined by `@apiEnum`</li><li>An array of any of the above types<sup>†</sup></li></ul><i><sup>†</sup>: If specifying an array parameter type, it is recommended to include in the `description` field what character should be used to delimit the array elements.</i> |
| `name`          | The name of the header. With no further modifiers (see below), the header is marked as required.                                                                                                                                                                                                                                                                                                                       |
| `?`             | Marks that the header is optional.                                                                                                                                                                                                                                                                                                                                                                                     |
| `=defaultValue` | Marks that an optional header has a default value.                                                                                                                                                                                                                                                                                                                                                                     |
| `description`   | A detailed multiline description which starts on the next line.                                                                                                                                                                                                                                                                                                                                                        |

Example:

```js
/**
 * @apiProto {rest}
 * 
 * @api {get} /users
 * Fetches a user with the given ID.
 * 
 * @apiQuery {String} [limit=20]
 * The maximum number of users to return.
 */
```

#### `@apiQueryExample [{lang}] title`</br>`example`

Provides an example of a query parameter.

| Field      | Description                                                                   |
| ---------- | ----------------------------------------------------------------------------- |
| `{lang}`   | Specifies the code language in which the example is intended to be formatted. |
| `title`*   | A short title text for the example code block.                                |
| `example`* | The multiline text which will make up the example code block.                 |

Example:

```js
/**
 * @apiProto {rest}
 * 
 * @api {get} /users
 * Fetches a user with the given ID.
 * 
 * @apiQuery {String} [limit=20]
 * The maximum number of users to return.
 * 
 * @apiQueryExample Users Example
 * /users?limit=15
 */
```

#### `@apiUse name`

Targets a defined `@apiDefine` block in the current file or global `@apiDefineGlobal` block. If both the current block and the target block specify an `@apiVersion`, this tag will only import blocks with an equal or older specified version.

Any single-use tags in the imported block will override the corresponding tags in the current block specified prior to this tag. Any such tags specified after this tag will override the corresponding tags in the imported block.

| Field  | Description                              |
| ------ | ---------------------------------------- |
| `name` | The name of the defined block to import. |

Example: 

```js
/**
 * @apiDefine OnSuccess
 * 
 * @apiSuccess (200) {String} firstName
 * The user's first name.
 * 
 * @apiSuccess (200) {String} lastName
 * The user's last name.
 */

/**
 * @apiProto {rest}
 * 
 * @api /user/:id
 * 
 * @apiUse OnSuccess
 */
```

#### `@apiVersion version`

Sets the version of this block for the corresponding endpoint. Multiple blocks can be defined for the same endpoint if they have different versions. Generator implementations can use the different versions to generate version-specific documentation and/or generate change logs and upgrade paths.

| Field     | Description                                                                                     |
| --------- | ----------------------------------------------------------------------------------------------- |
| `version` | The supported version of this block, expressed using [Semantic Versioning](http://semver.org/). |

### REST Options

<i>Fields marked with * are required.</i>

#### `@api {method} path title`


#### `@apiSuccess [(group)] [{type}] name[.inner][?]`<br/>`[description]`

Defines a return parameter of a successful response. Multiple successful responses can be specified by having multiple instances of `@apiSuccess` with different values for `(group)`.

| Field           | Description                                                                                                                                                                                                                                                              |
| --------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| `(group)`       | Specifies a group name for this parameter. All instances of `@apiSuccess` in this code block with the same group name should be grouped together in generator implementations.                                                                                           |
| `{type}`        | The type parameter type of the parameter.<br/><br/>Supported values are:<ul><li>`Boolean`</li><li>`Integer`</li><li>`Number`</li><li>`String`</li><li>`Object`</li><li>Any type defined by `@apiEnum` or `@apiType`</li><li>An array of any of the above types</li></ul> |
| `name`*         | The name of the parameter.                                                                                                                                                                                                                                               |
| `[.inner]`      | Describes the inner parameter of a previously defined parameter with the defined type of `Object`.                                                                                                                                                                       |
| `?`             | Marks that the parameter is optional.                                                                                                                                                                                                                                    |
| `[description]` | A detailed multiline description which starts on the next line.                                                                                                                                                                                                          |

Example:

```js
/**
 * @apiProto {rest}
 * 
 * @api /user/:id
 * 
 * @apiSuccess (200) {String} firstName
 * The user's first name.
 * 
 * @apiSuccess (200) {String} lastName
 * The user's last name.
 * 
 * @apiSuccess (200) {Object} options
 * The user-set options for this user.
 * 
 * @apiSuccess (200) {Boolean} options.lightMode
 * Whether light mode is enabled.
 */
```

#### `@apiSuccessExample [{lang}] title`<br/>`example`

Shows an example usage for a successful response header.

| Field      | Description                                                                   |
| ---------- | ----------------------------------------------------------------------------- |
| `{lang}`   | Specifies the code language in which the example is intended to be formatted. |
| `title`*   | A short title text for the example code block.                                |
| `example`* | The multiline text which will make up the example code block.                 |

Example:

```js
/**
 * @apiProto {rest}
 * 
 * @api /user/:id
 * 
 * @apiSuccess (200) {String} firstName
 * The user's first name.
 * 
 * @apiSuccess (200) {String} lastName
 * The user's last name.
 * 
 * @apiSuccess (200) {Object} options
 * The user-set options for this user.
 * 
 * @apiSuccess (200) {Boolean} options.lightMode
 * Whether light mode is enabled.
 * 
 * @apiSuccessExample {json} 200 Example
 * HTTP/1.1 200 Success
 * {
 *   "firstName": "John",
 *   "lastName": "Smith",
 *   "options": {
 *     "lightMode": false
 *   }
 * }
 */
```

#### `@apiSuccessHeader [(group)] [{type}] name[?][=defaultValue]`<br/>`[description]`

Defines a successful response header for this endpoint.

| Field           | Description                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| --------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| `(group)`       | Specifies a group name for this header. All instances of `@apiSuccessHeader` in this code block with the same group name should be grouped together in generator implementations with any corresponding `@apiSuccess` instances.                                                                                                                                                                                                                 |
| `{type}`        | The type parameter type of the header.<br/><br/>Supported values are:<ul><li>`Boolean`</li><li>`Integer`</li><li>`Number`</li><li>`String`</li><li>Any type defined by `@apiEnum` or `@apiType`</li><li>An array of any of the above types<sup>†</sup></li></ul><i><sup>†</sup>: If specifying an array parameter type, it is recommended to include in the `description` field what character should be used to delimit the array elements.</i> |
| `{name}`        | The name of the header. With no further modifiers (see below), the header is marked as required.                                                                                                                                                                                                                                                                                                                                                 |
| `?`             | Marks that the header is optional.                                                                                                                                                                                                                                                                                                                                                                                                               |
| `=defaultValue` | Marks that an optional header has a default value.                                                                                                                                                                                                                                                                                                                                                                                               |
| `description`   | A detailed multiline description which starts on the next line.                                                                                                                                                                                                                                                                                                                                                                                  |

Example:

```js
/**
 * @apiProto {rest}
 * 
 * @api {get} /user/:id
 * Fetches a user with the given ID.
 * 
 * @apiHeader x-cache-info
 * Cache information from the CDN.
 */
```

#### `@apiSuccessHeaderExample [{lang}] title`<br/>`example`

Shows an example usage for a successful response header.

| Field      | Description                                                                   |
| ---------- | ----------------------------------------------------------------------------- |
| `{lang}`   | Specifies the code language in which the example is intended to be formatted. |
| `title`*   | A short title text for the example code block.                                |
| `example`* | The multiline text which will make up the example code block.                 |

Example:

```js
/**
 * @apiProto {rest}
 * 
 * @api {get} /user/:id
 * Fetches a user with the given ID.
 * 
 * @apiHeader x-cache-info
 * Cache information from the CDN.
 * 
 * @apiHeaderExample {json} X-Cache-Info Example:
 * { "x-cache-info": "hit" }
 */
```


### Event Options

<i>Fields marked with * are required.</i>

#### `@api {type} path title`

#### `@apiEvent name`

## Schema - Output JSON File



## Schema - Configuration

<i>Fields marked with * are required.</i>

### Root object

| Field      | Type             | Description                                                                                                               |
| ---------- | ---------------- | ------------------------------------------------------------------------------------------------------------------------- |
| `asyncApi` | AsyncApiConfig   | A configuration object to control the generation of AsyncAPI files.                                                       |
| `files`    | FileConfig       | An object that describes how to handle files in the project folder when running the program.                              |
| `format`   | `"json", "yaml"` | The output format and extension of the api_docstring file. If omitted, defaults to `"json"`.                              |
| `groups`   | GroupConfig[]    | An array that describes how to configure groups specified in docstrings.                                                  |
| `openApi`  | OpenApiConfig    | A configuration object to control the generation of OpenAPI files.                                                        |
| `outDir`   | string           | The relative or absolute path of the directory to which to output the generated files. If omitted, defaults to `"./api"`. |
| `srcDir`   | string           | The relative or absolute path of the directory to which to output the generated files. If omitted, defaults to `"./src"`. |
| `version`* | string           | The Semantic Version string of which version of api-docstring specification to target.                                    |

### AsyncApiConfig

| Field     | Type             | Description                                                                                           |
| --------- | ---------------- | ----------------------------------------------------------------------------------------------------- |
| `enabled` | bool             | If set to `false`, an AsyncAPI file is not generated. If omitted, defaults to `true`.                 |
| `format`  | `"json", "yaml"` | The output format and extension of the `asyncapi` file. If omitted, defaults to `"json"`.             |
| `out`     | string           | If specified, overrides the default output path for the generated AsyncAPI file.                      |
| `version` | string           | The version of the AsyncAPI standard to target. If omitted, defaults to the latest supported version. |

### FileConfig

| Field     | Type     | Description                                                                                                                                      |
| --------- | -------- | ------------------------------------------------------------------------------------------------------------------------------------------------ |
| `exclude` | string[] | A wildcard-supported array of files to exclude in the program. (Note: This only affects files specified by `include`.)                           |
| `include` | string[] | A wildcard-supported array of files to include in the program. If omitted, defaults to `["./**/*.js", "./**/*.ts", "./**/*.jsx", "./**/*.tsx"]`. |

### GroupConfig

| Field       | Type   | Description                                                                                                                                                                                                                           |
| ----------- | ------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `include`   | bool   | Whether or not to include the group in the output. If omitted, defaults to `true`.                                                                                                                                                    |
| `name`*     | string | The name of the group. This must match the value used for `@apiGroup` in docstrings.                                                                                                                                                  |
| `sortOrder` | number | The order in which the group will appear in exported resources. Groups will be sorted numerically with larger numbers appearing lower, and groups with the same `sortOrder` are sorted alphanumerically. If omitted, defaults to `0`. |

### OpenApiConfig

| Field     | Type             | Description                                                                                          |
| --------- | ---------------- | ---------------------------------------------------------------------------------------------------- |
| `enabled` | bool             | If set to `false`, an OpenAPI file is not generated. If omitted, defaults to `true`.                 |
| `format`  | `"json", "yaml"` | The output format and extension of the `openapi` file. If omitted, defaults to `"json"`.             |
| `out`     | string           | If specified, overrides the default output path for the generated OpenAPI file.                      |
| `version` | string           | The version of the OpenAPI standard to target. If omitted, defaults to the latest supported version. |